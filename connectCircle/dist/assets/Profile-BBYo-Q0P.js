import{_ as S,l as x,m as D,p as y,r as d,o as T,c as o,b as r,d as e,i as V,t as l,q as j,s as f,v as b,w as M,T as B,x as E,u as A,y as I,h as O,z,A as Y}from"./index-Bl4HSKIY.js";const F={class:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6"},q={class:"max-w-4xl mx-auto"},G={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},H={class:"bg-white/90 dark:bg-gray-800/90 rounded-2xl p-6 shadow-lg border border-white/30 dark:border-gray-700/30"},J={class:"flex flex-col items-center text-center"},K={key:0,class:"w-28 h-28 rounded-xl overflow-hidden shadow-md mb-4"},Q=["src"],W={key:1,class:"w-28 h-28 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-2xl font-bold shadow-md mb-4"},X={class:"text-lg font-extrabold text-gray-900 dark:text-white mb-1"},Z={class:"text-sm text-gray-500 dark:text-gray-400"},$={class:"mt-4 w-full"},ee=["disabled"],te={key:0},se={key:1},ae={class:"md:col-span-2 bg-white/90 dark:bg-gray-800/90 rounded-2xl p-6 shadow-lg border border-white/30 dark:border-gray-700/30"},oe={class:"flex items-center gap-3"},re=["disabled"],le={key:0},ie={key:1},ne=["disabled"],de={key:0},ue={key:1},ce={class:"mt-6 border-t border-gray-200/50 dark:border-gray-700/50 pt-4 grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-gray-600 dark:text-gray-300"},ve={class:"break-all font-mono text-sm mt-1"},me={class:"mt-1"},ge={class:"mt-1"},pe={class:"mt-1"},xe={class:"flex items-center gap-3"},ye={key:0,class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},he={key:1,class:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},fe={class:"font-medium"},be={__name:"Profile",setup(we){const h=D(),w=A(),a=x(()=>h.state.user||y.currentUser||{}),i=d(a.value?.displayName||""),u=d(a.value?.photoURL||""),c=d(!1),v=d(!1),m=d(!1),g=d({show:!1,message:"",type:"success"}),n=(s,t="success")=>{g.value={show:!0,message:s,type:t},setTimeout(()=>{g.value.show=!1},3e3)},k=x(()=>(i.value||a.value.displayName||a.value.email||"U").split(" ").map(t=>t[0]||"").join("").slice(0,2).toUpperCase()),_=x(()=>{try{return a.value?.providerData?.[0]?.providerId||"password"}catch{return"password"}}),U=x(()=>{try{const s=a.value?.metadata?.creationTime||a.value?.creationTime||null;return s?new Date(s).toLocaleString():"Unknown"}catch{return"Unknown"}});T(()=>{i.value=a.value?.displayName||"",u.value=a.value?.photoURL||""});const R=async()=>{if(!c.value){c.value=!0;try{const s=y.currentUser;if(!s)throw new Error("No authenticated user");const t=(i.value||"").trim(),p=(u.value||"").trim()||null;await Y(s,{displayName:t||null,photoURL:p||null});const P={uid:s.uid,email:s.email,displayName:s.displayName,photoURL:s.photoURL,emailVerified:s.emailVerified,providerData:s.providerData};h.commit("setUser",P),n("Profile updated","success")}catch(s){console.error("saveProfile error:",s),n("Failed to update profile","error")}finally{c.value=!1}}},N=async()=>{if(!v.value){v.value=!0;try{if(!a.value?.email)throw new Error("No email available");await I(y,a.value.email),n("Password reset email sent","success")}catch(s){console.error("sendPasswordReset error:",s),n("Failed to send reset email","error")}finally{v.value=!1}}},L=()=>{i.value=a.value?.displayName||"",u.value=a.value?.photoURL||"",n("Changes reverted","success")},C=async()=>{if(!m.value){m.value=!0;try{await E(y),h.commit("clearUser"),n("Signed out","success"),setTimeout(()=>w.push("/"),500)}catch(s){console.error("Sign out failed:",s),n("Sign out failed","error")}finally{m.value=!1}}};return(s,t)=>(r(),o("div",F,[e("div",q,[e("div",G,[e("div",H,[e("div",J,[a.value.photoURL?(r(),o("div",K,[e("img",{src:a.value.photoURL,alt:"avatar",class:"w-full h-full object-cover"},null,8,Q)])):(r(),o("div",W,l(k.value),1)),e("h3",X,l(i.value||a.value.displayName||"Unnamed User"),1),e("p",Z,l(a.value.email||"No email"),1),e("div",$,[e("button",{onClick:C,class:"w-full py-2 px-4 rounded-xl bg-red-600 text-white font-semibold hover:shadow-lg transition-transform hover:scale-101",disabled:m.value},[m.value?(r(),o("span",te,"Signing out...")):(r(),o("span",se,"Sign Out"))],8,ee)])])]),e("div",ae,[t[9]||(t[9]=e("div",{class:"flex items-center justify-between mb-4"},[e("h2",{class:"text-xl font-bold text-gray-900 dark:text-white"},"Profile"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Manage your account details")],-1)),e("form",{onSubmit:j(R,["prevent"]),class:"space-y-4"},[e("div",null,[t[2]||(t[2]=e("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1"},"Display name",-1)),f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=p=>i.value=p),type:"text",placeholder:"Your display name",class:"w-full px-4 py-2 rounded-xl border dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none"},null,512),[[b,i.value]])]),e("div",null,[t[3]||(t[3]=e("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1"},"Avatar URL (optional)",-1)),f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=p=>u.value=p),type:"url",placeholder:"https://example.com/avatar.jpg",class:"w-full px-4 py-2 rounded-xl border dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none"},null,512),[[b,u.value]]),t[4]||(t[4]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"You can paste a link to an image (or leave blank to use initials).",-1))]),e("div",oe,[e("button",{type:"submit",disabled:c.value,class:"px-6 py-2 rounded-xl bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-semibold shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-200"},[c.value?(r(),o("span",le,"Saving...")):(r(),o("span",ie,"Save Changes"))],8,re),e("button",{type:"button",onClick:N,disabled:v.value,class:"px-4 py-2 rounded-xl border dark:border-gray-600 bg-white/50 dark:bg-gray-700/50 text-gray-700 dark:text-gray-200 hover:bg-white/70 transition-colors"},[v.value?(r(),o("span",de,"Sending...")):(r(),o("span",ue,"Reset Password"))],8,ne),e("button",{type:"button",onClick:L,class:"ml-auto text-sm text-gray-500 dark:text-gray-400 hover:underline"}," Revert ")])],32),e("div",ce,[e("div",null,[t[5]||(t[5]=e("div",{class:"text-xs text-gray-400"},"UID",-1)),e("div",ve,l(a.value.uid||"â€”"),1)]),e("div",null,[t[6]||(t[6]=e("div",{class:"text-xs text-gray-400"},"Provider",-1)),e("div",me,l(_.value),1)]),e("div",null,[t[7]||(t[7]=e("div",{class:"text-xs text-gray-400"},"Email verified",-1)),e("div",ge,l(a.value.emailVerified?"Yes":"No"),1)]),e("div",null,[t[8]||(t[8]=e("div",{class:"text-xs text-gray-400"},"Created At",-1)),e("div",pe,l(U.value),1)])])])]),V(B,{name:"fade"},{default:M(()=>[g.value.show?(r(),o("div",{key:0,class:z([s.toastClass,"fixed bottom-6 right-6 z-50 px-4 py-3 rounded-xl shadow-xl"])},[e("div",xe,[g.value.type==="success"?(r(),o("svg",ye,[...t[10]||(t[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(r(),o("svg",he,[...t[11]||(t[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])])),e("div",fe,l(g.value.message),1)])],2)):O("",!0)]),_:1})])]))}},_e=S(be,[["__scopeId","data-v-42c01505"]]);export{_e as default};
